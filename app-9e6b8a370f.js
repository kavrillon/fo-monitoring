!function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=e("./controller/AppController"),i=r(o);new i.default},{"./controller/AppController":3}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={name:"fo-monitoring",shellCacheName:"fo-monitoring",dataCacheName:"fo-monitoring-data",version:1,debug:!0,trello:{url:"https://api.trello.com/1/boards/577130dfed8fabf757eddc60/lists",filters:"cards=open&card_fields=name,labels&fields=name,desc"},stores:{TestModel:{properties:{autoIncrement:!0,keyPath:"url"},indexes:{time:{unique:!0}}},AppModel:{deleteOnUpgrade:!0,properties:{autoIncrement:!0}}}};n.default=r},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./Controller"),c=r(s),l=e("../model/AppModel"),f=r(l),d=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.appModel=null,e.loader=document.querySelector(".js-loader"),e.main=document.querySelector(".js-main"),e.empty=document.querySelector(".js-empty"),e.btnLoadData=document.querySelector(".js-load-data"),e.setLoader(!0),e.sideNavToggleButton=document.querySelector(".js-sidebar-toggle"),e.sideNav=document.querySelector(".js-sidebar"),e.sideNavContent=e.sideNav.querySelector(".js-sidebar-content"),e.bindEvents(),e.loadData(),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(function(){}),e}return a(t,e),u(t,[{key:"setLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isLoading;e?(this.main.setAttribute("hidden",!0),this.loader.removeAttribute("hidden"),this.isLoading=e):(this.main.removeAttribute("hidden"),this.loader.setAttribute("hidden",!0),this.isLoading=e)}},{key:"bindEvents",value:function(){var e=this;this.btnLoadData.addEventListener("click",function(){e.closeSideNav()}),this.sideNav.addEventListener("click",function(){e.closeSideNav()}),this.sideNavContent.addEventListener("click",function(e){e.stopPropagation()}),this.sideNavToggleButton.addEventListener("click",function(){e.toggleSideNav()})}},{key:"loadData",value:function(){var e=this;f.default.get(1).then(function(t){e.appModel=t,"undefined"==typeof t&&(e.appModel=new f.default,e.appModel.put()),e.appModel.firstRun&&(e.setLoader(!1),e.setEmpty(!0))})}},{key:"setEmpty",value:function(e){e?(this.main.setAttribute("hidden",!0),this.empty.classList.add("active")):(this.main.removeAttribute("hidden"),this.empty.classList.remove("active"))}},{key:"toggleSideNav",value:function(){this.sideNav.classList.contains("active")?this.closeSideNav():this.openSideNav()}},{key:"openSideNav",value:function(){this.sideNav.classList.add("active"),this.sideNavToggleButton.focus()}},{key:"closeSideNav",value:function(){this.sideNav.classList.remove("active")}}]),t}(c.default);n.default=d},{"../model/AppModel":7,"./Controller":4}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.STATUS_CODE_SUCCESS=200}return o(e,[{key:"loadScript",value:function(e){return new Promise(function(t,n){var r=document.createElement("script");r.async=!0,r.src=e,r.onload=t,r.onerror=n,document.head.appendChild(r)})}},{key:"loadCSS",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="text",r.onload=function(){if(this.status===this.STATUS_CODE_SUCCESS){var e=document.createElement("style");e.textContent=r.response,document.head.appendChild(e),t()}else n()},r.send()})}}]),e}();n.default=i},{}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return"undefined"!=typeof window.ConfigManagerInstance_?Promise.resolve(window.ConfigManagerInstance_):(window.ConfigManagerInstance_=new c,Promise.resolve(window.ConfigManagerInstance_))}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.default=i;var u=e("../config/Config"),s=r(u),c=function(){function e(){o(this,e),this.config=s.default}return a(e,[{key:"getStore",value:function(e){return this.config_.stores[e]}},{key:"config",set:function(e){this.config_=e},get:function(){return this.config_}}]),e}()},{"../config/Config":2}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return"undefined"!=typeof window.DatabaseInstance_?Promise.resolve(window.DatabaseInstance_):(window.DatabaseInstance_=new c,Promise.resolve(window.DatabaseInstance_))}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.default=i;var u=e("./ConfigManager"),s=r(u),c=function(){function e(){var t=this;o(this,e),(0,s.default)().then(function(e){var n=e.config;t.db_=null,t.name_=n.name,t.version_=n.version,t.stores_=n.stores})}return a(e,[{key:"getStore",value:function(e){if(!this.stores_[e])throw'There is no store with name "'+e+'"';return this.stores_[e]}},{key:"open",value:function(){var e=this;return this.db_?Promise.resolve(this.db_):new Promise(function(t,n){var r=indexedDB.open(e.name_,e.version_);r.onupgradeneeded=function(t){e.db_=t.target.result;for(var n=Object.keys(e.stores_),r=void 0,o=0;o<n.length;o++){if(r=n[o],e.db_.objectStoreNames.contains(r)){if(!e.stores_[r].deleteOnUpgrade)continue;e.db_.deleteObjectStore(r)}var i=e.db_.createObjectStore(r,e.stores_[r].properties);if("undefined"!=typeof e.stores_[r].indexes)for(var a=e.stores_[r].indexes,u=Object.keys(a),s=void 0,c=0;c<u.length;c++)s=u[c],i.createIndex(s,s,a[s])}},r.onsuccess=function(n){e.db_=n.target.result,t(e.db_)},r.onerror=function(e){n(e)}})}},{key:"close",value:function(){var e=this;return new Promise(function(t,n){e.db_||n("No database connection"),e.db_.close(),t(e.db_)})}},{key:"nuke",value:function(){var e=this;return new Promise(function(t,n){e.close();var r=indexedDB.deleteDatabase(e.name_);r.onsuccess=function(e){t(e)},r.onerror=function(e){n(e)}})}},{key:"put",value:function(e,t,n){return this.open().then(function(r){return new Promise(function(o,i){var a=r.transaction(e,"readwrite"),u=a.objectStore(e),s=u.put(t,n);a.oncomplete=function(){o(s.result)},a.onabort=a.onerror=function(e){i(e)}})})}},{key:"get",value:function(e,t){return this.open().then(function(n){return new Promise(function(r,o){var i=n.transaction(e,"readonly"),a=i.objectStore(e),u=void 0;i.oncomplete=function(){r(u.result)},i.onabort=i.onerror=function(e){o(e)},u=a.get(t)})})}},{key:"getAll",value:function(e,t,n){return this.open().then(function(r){return new Promise(function(o,i){var a=r.transaction(e,"readonly"),u=a.objectStore(e),s=void 0;"string"!=typeof n&&(n="next"),s="string"!=typeof t?u.index(t).openCursor(null,n):u.openCursor();var c=[];s.onsuccess=function(e){var t=e.target.result;t?(c.push({key:t.key,value:t.value}),t.continue()):o(c)},s.onerror=function(e){i(e)}})})}},{key:"delete",value:function(e,t){return this.open().then(function(n){return new Promise(function(r,o){var i=n.transaction(e,"readwrite"),a=i.objectStore(e);i.oncomplete=function(e){r(e)},i.onabort=i.onerror=function(e){o(e)},a.delete(t)})})}},{key:"deleteAll",value:function(e){return this.open().then(function(t){return new Promise(function(n,r){var o=t.transaction(e,"readwrite"),i=o.objectStore(e),a=i.clear();a.onsuccess=function(e){n(e)},a.onerror=function(e){r(e)}})})}}]),e}()},{"./ConfigManager":5}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./Model"),c=r(s),l=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.firstRun=!0,r.preferences={},r}return a(t,e),u(t,null,[{key:"UPDATED",get:function(){return"AppModel-updated"}},{key:"storeName",get:function(){return"AppModel"}}]),t}(c.default);n.default=l},{"./Model":8}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../libs/Database"),u=r(a),s=e("../libs/ConfigManager"),c=r(s),l=function(){function e(t){o(this,e),this.key=t}return i(e,[{key:"put",value:function(){return this.constructor.put(this)}},{key:"delete",value:function(){return this.constructor.delete(this)}}],[{key:"nuke",value:function(){return(0,u.default)().then(function(e){return e.close()}).then(function(e){return e.nuke()})}},{key:"get",value:function(t){var n=this;return this instanceof e&&Promise.reject("Can't call get on Model directly. Inherit first."),(0,u.default)().then(function(e){return e.get(n.storeName,t)}).then(function(e){return(0,c.default)().then(function(r){var o=r.getStore(n.storeName);if(e){var i=t;return o.properties.keyPath&&(i=void 0),new n(e,i)}})})}},{key:"getAll",value:function(t,n){var r=this;return this instanceof e&&Promise.reject("Can't call getAll on Model directly. Inherit first."),(0,u.default)().then(function(e){return e.getAll(r.storeName,t,n)}).then(function(e){return(0,c.default)().then(function(t){var n=t.getStore(r.storeName),o=[];for(var i in e){var a=i.key;n.properties.keyPath&&(a=void 0),o.push(new r(i.value,a))}return o})})}},{key:"put",value:function(t){var n=this;return this instanceof e&&Promise.reject("Can't call put on Model directly. Inherit first."),(0,u.default)().then(function(e){return e.put(n.storeName,t,t.key)}).then(function(e){return(0,c.default)().then(function(r){var o=r.getStore(n.storeName),i=o.properties.keyPath;return i||(t.key=e),t})})}},{key:"deleteAll",value:function(){var t=this;return this instanceof e&&Promise.reject("Can't call deleteAll on Model directly. Inherit first."),(0,u.default)().then(function(e){return e.deleteAll(t.storeName)}).catch(function(e){if("NotFoundError"!==e.name)throw e})}},{key:"delete",value:function(t){var n=this;return this instanceof e&&Promise.reject("Can't call delete on Model directly. Inherit first."),(0,c.default)().then(function(e){if(t instanceof n){var r=e.getStore(n.storeName),o=r.properties.keyPath;t=o?t[o]:t.key}return(0,u.default)().then(function(e){return e.delete(n.storeName,t)})})}},{key:"ASCENDING",get:function(){return"next"}},{key:"DESCENDING",get:function(){return"prev"}},{key:"UPDATED",get:function(){return"Model-updated"}},{key:"storeName",get:function(){return"Model"}}]),e}();n.default=l},{"../libs/ConfigManager":5,"../libs/Database":6}]},{},[1]);